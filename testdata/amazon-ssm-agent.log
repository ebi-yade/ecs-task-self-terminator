2023-11-17 07:08:48 INFO Proxy environment variables:
2023-11-17 07:08:48 INFO https_proxy:
2023-11-17 07:08:48 INFO http_proxy:
2023-11-17 07:08:48 INFO no_proxy:
2023-11-17 07:08:48 INFO Agent will take identity from ECS
2023-11-17 07:08:48 INFO [amazon-ssm-agent] using named pipe channel for IPC
2023-11-17 07:08:48 INFO [amazon-ssm-agent] using named pipe channel for IPC
2023-11-17 07:08:48 INFO [amazon-ssm-agent] using named pipe channel for IPC
2023-11-17 07:08:48 INFO [amazon-ssm-agent] amazon-ssm-agent - v3.2.1705.0
2023-11-17 07:08:48 INFO [amazon-ssm-agent] OS: linux, Arch: amd64
2023-11-17 07:08:48 INFO [amazon-ssm-agent] Starting Core Agent
2023-11-17 07:08:48 INFO [CredentialRefresher] Identity does not require credential refresher
2023-11-17 07:08:48 INFO [CredentialRefresher] Credentials ready
2023-11-17 07:08:49 INFO [amazon-ssm-agent] [LongRunningWorkerContainer] [WorkerProvider] Worker ssm-agent-worker is not running, starting worker process
2023-11-17 07:08:49 INFO [ssm-agent-worker] Agent will take identity from ECS
2023-11-17 07:08:49 INFO [ssm-agent-worker] using named pipe channel for IPC
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] Appending MGSInteractor to MessageService interactors
2023-11-17 07:08:49 INFO [ssm-agent-worker] Dial to Core Agent broadcast channel
2023-11-17 07:08:49 INFO [ssm-agent-worker] using named pipe channel for IPC
2023-11-17 07:08:49 INFO [ssm-agent-worker] Dial to Core Agent broadcast channel
2023-11-17 07:08:49 INFO [ssm-agent-worker] using named pipe channel for IPC
2023-11-17 07:08:49 INFO [ssm-agent-worker] Start to listen to Core Agent health channel
2023-11-17 07:08:49 INFO [ssm-agent-worker] Start to listen to Core Agent termination channel
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing bookkeeping folders
2023-11-17 07:08:49 INFO [ssm-agent-worker] removing the completed state files
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing bookkeeping folders for long running plugins
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing replies folder for MDS reply requests that couldn't reach the service
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing replies folder for MGS reply requests that couldn't reach the service
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing healthcheck folders for long running plugins
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing locations for inventory plugin
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing default location for custom inventory
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing default location for file inventory
2023-11-17 07:08:49 INFO [ssm-agent-worker] Initializing default location for role inventory
2023-11-17 07:08:49 INFO [ssm-agent-worker] Init the cloudwatchlogs publisher
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:updateSsmAgent
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:refreshAssociation
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:configurePackage
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:downloadContent
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:softwareInventory
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:runPowerShellScript
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:configureDocker
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:runDockerAction
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform independent plugin aws:runDocument
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform dependent plugin aws:runShellScript
2023-11-17 07:08:49 INFO [ssm-agent-worker] [instanceID=00000000000000000000000000000000-000000000] Successfully loaded platform dependent plugin aws:domainJoin
2023-11-17 07:08:49 INFO [ssm-agent-worker] ssm-agent-worker - v3.2.1705.0
2023-11-17 07:08:49 INFO [ssm-agent-worker] OS: linux, Arch: amd64
2023-11-17 07:08:49 INFO [amazon-ssm-agent] [LongRunningWorkerContainer] [WorkerProvider] Worker ssm-agent-worker (pid:23) started
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] starting MessageService
2023-11-17 07:08:49 INFO [amazon-ssm-agent] [LongRunningWorkerContainer] Monitor long running worker health every 60 seconds
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] initializing message handler
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] MGSInteractor initialization started
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] SSM Agent is trying to setup control channel for MGSInteractor
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] agent telemetry cloudwatch metrics disabled
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Setting up websocket for controlchannel for instance: ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000, requestId: e01d87cb-5d61-496d-9e93-596f4587417b
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] listen incoming messages thread in MGS interactor started
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] started reply processing queue
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] listen reply thread in MGS interactor started
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Opening websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/control-channel/ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000?role=subscribe&stream=input
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Successfully opened websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/control-channel/ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000?role=subscribe&stream=input
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Starting websocket listener
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Starting websocket pinger
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel 701e9c91-5262-4ad1-99fc-f953d2a6af5f, message type: control_channel_ready
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Control channel ready message received: true
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Setting up agent telemetry scheduler
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Set up control channel successfully
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] supported workers for the interactor MGSInteractor: [ssm-session-worker]
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] processor initialization started for worker ssm-session-worker belonging to MGSInteractor
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] registering processor SessionProcessor for the interactor: MGSInteractor
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Starting
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Initial processing
2023-11-17 07:08:49 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] listening session reply.
2023-11-17 07:08:51 INFO [ssm-agent-worker] [MessageService] processor initialization completed for worker ssm-session-worker belonging to MGSInteractor
2023-11-17 07:08:51 INFO [ssm-agent-worker] [MessageService] MGSInteractor initialization completed
2023-11-17 07:08:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:08:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel 50951ce1-4c16-4b6f-8b99-a64114a1f182, message type: interactive_shell
2023-11-17 07:09:48 INFO ssm-session-worker - v3.2.1705.0
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - interactive_shell, Id - 50951ce1-4c16-4b6f-8b99-a64114a1f182
2023-11-17 07:09:48 INFO picking up runtime config identity selector
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Parsing AgentMessage 50951ce1-4c16-4b6f-8b99-a64114a1f182, Payload: {"schemaVersion":1,"taskId":"123456789012:ecs-execute-command-03e391dc3f39b326a","topic":"test_topic","content":"{\"RunAsUser\":\"\",\"Parameters\":{\"cloudWatchLogGroupName\":\"/ecs/gate\",\"command\":\"sh\"},\"DocumentContent\":{\"schemaVersion\":\"1.0\",\"inputs\":{\"cloudWatchEncryptionEnabled\":\"{{cloudWatchEncryptionEnabled}}\",\"s3EncryptionEnabled\":\"{{s3EncryptionEnabled}}\",\"s3BucketName\":\"{{s3BucketName}}\",\"kmsKeyId\":\"{{kmsKeyId}}\",\"s3KeyPrefix\":\"{{s3KeyPrefix}}\",\"cloudWatchLogGroupName\":\"{{cloudWatchLogGroupName}}\"},\"description\":\"This document holds parameterized settings for starting a session with Session Manager.\",\"sessionType\":\"InteractiveCommands\",\"parameters\":{\"cloudWatchEncryptionEnabled\":{\"allowedValues\":[\"true\",\"false\"],\"default\":\"false\",\"description\":\"Enable Cloudwatch Encryption\",\"type\":\"String\"},\"s3EncryptionEnabled\":{\"allowedValues\":[\"true\",\"false\"],\"default\":\"false\",\"description\":\"Enable S3 Encryption\",\"type\":\"String\"},\"s3BucketName\":{\"default\":\"\",\"description\":\"S3 bucket for logging\",\"type\":\"String\"},\"kmsKeyId\":{\"default\":\"\",\"description\":\"KMS key for encryption\",\"type\":\"String\"},\"s3KeyPrefix\":{\"default\":\"\",\"description\":\"S3 prefix for logging\",\"type\":\"String\"},\"cloudWatchLogGroupName\":{\"default\":\"\",\"description\":\"Cloud watch log group name for logging\",\"type\":\"String\"},\"command\":{\"description\":\"The command to run on the instance\",\"type\":\"String\"}},\"properties\":{\"linux\":{\"runAsElevated\":false,\"commands\":\"{{command}}\"},\"windows\":{\"runAsElevated\":false,\"commands\":\"{{command}}\"}}},\"SessionOwner\":\"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command\",\"SessionId\":\"ecs-execute-command-03e391dc3f39b326a\",\"DocumentName\":\"AmazonECS-ExecuteInteractiveCommand\"}"}
2023-11-17 07:09:48 INFO Agent will take identity from ECS
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Validating SSM parameters
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] Init the cloudwatchlogs publisher
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document ecs-execute-command-03e391dc3f39b326a submission started
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] document: ecs-execute-command-03e391dc3f39b326a worker started
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document ecs-execute-command-03e391dc3f39b326a submission ended
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] channel: ecs-execute-command-03e391dc3f39b326a found
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Got job ecs-execute-command-03e391dc3f39b326a, starting worker
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] failed to read the default channel root directory: open /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels: no such file or directory, creating a new Channel
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] worker listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] master listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] received plugin config message
2023-11-17 07:09:48 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] {"DocumentInformation":{"DocumentID":"ecs-execute-command-03e391dc3f39b326a","CommandID":"ecs-execute-command-03e391dc3f39b326a","AssociationID":"","InstanceID":"ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000","MessageID":"ecs-execute-command-03e391dc3f39b326a","RunID":"2023-11-17T07-09-48.712Z","CreatedDate":"55847-05-09 11:31:49 +0000 UTC","DocumentName":"AmazonECS-ExecuteInteractiveCommand","DocumentVersion":"","DocumentStatus":"InProgress","RunCount":0,"ProcInfo":{"Pid":31,"StartTime":"2023-11-17T07:09:48.715304175Z"},"ClientId":"","RunAsUser":"","SessionOwner":"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command"},"DocumentType":"StartSession","SchemaVersion":"1.0","InstancePluginsInformation":[{"Configuration":{"Settings":null,"Properties":{"linux":{"commands":"sh","runAsElevated":false},"windows":{"commands":"sh","runAsElevated":false}},"OutputS3KeyPrefix":"","OutputS3BucketName":"","S3EncryptionEnabled":false,"CloudWatchLogGroup":"/ecs/gate","CloudWatchEncryptionEnabled":false,"CloudWatchStreamingEnabled":false,"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-03e391dc3f39b326a/InteractiveCommands","MessageId":"ecs-execute-command-03e391dc3f39b326a","BookKeepingFileName":"ecs-execute-command-03e391dc3f39b326a","PluginName":"InteractiveCommands","PluginID":"InteractiveCommands","DefaultWorkingDirectory":"","Preconditions":null,"IsPreconditionEnabled":false,"CurrentAssociations":null,"SessionId":"ecs-execute-command-03e391dc3f39b326a","ClientId":"","KmsKeyId":"","RunAsEnabled":false,"RunAsUser":"","ShellProfile":{"windows":"","linux":""},"SessionOwner":"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command","UpstreamServiceName":""},"Name":"InteractiveCommands","Result":{"pluginID":"","pluginName":"","status":"","code":0,"output":null,"startDateTime":"0001-01-01T00:00:00Z","endDateTime":"0001-01-01T00:00:00Z","outputS3BucketName":"","outputS3KeyPrefix":"","stepName":"","error":"","standardOutput":"","standardError":""},"Id":"InteractiveCommands"}],"CancelInformation":{"CancelMessageID":"","CancelCommandID":"","Payload":"","DebugInfo":""},"IOConfig":{"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-03e391dc3f39b326a","OutputS3BucketName":"{{s3BucketName}}","OutputS3KeyPrefix":"{{s3KeyPrefix}}","CloudWatchConfig":{"LogGroupName":"","LogStreamPrefix":"","LogGroupEncryptionEnabled":false}},"UpstreamServiceName":"MessageGatewayService"}
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] Running plugin InteractiveCommands InteractiveCommands
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Setting up datachannel for session: ecs-execute-command-03e391dc3f39b326a, requestId: 8bc173a3-7d29-4d9c-a81e-251d632c6a72, clientId:
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Opening websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-03e391dc3f39b326a?role=publish_subscribe
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Successfully opened websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-03e391dc3f39b326a?role=publish_subscribe
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Starting websocket pinger
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Starting websocket listener
2023-11-17 07:09:48 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Skipping handshake.
2023-11-17 07:09:49 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Starting command executor
2023-11-17 07:09:49 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Plugin InteractiveCommands started
2023-11-17 07:10:18 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Uploading logs at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-03e391dc3f39b326a/InteractiveCommands/ecs-execute-command-03e391dc3f39b326a.log to CloudWatch
2023-11-17 07:10:19 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Started CloudWatch upload
2023-11-17 07:10:19 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Log stream creation started
2023-11-17 07:10:19 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Log stream already created
2023-11-17 07:10:19 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Log stream creation ended
2023-11-17 07:10:19 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Calling Get Sequence token
2023-11-17 07:10:19 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Received Sequence token
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Finished uploading events to CloudWatch
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Stopping pty
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Closing datachannel with channel Id ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Closing websocket channel connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-03e391dc3f39b326a?role=publish_subscribe
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Ending websocket pinger
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Ending the channel listening routine since the channel is closed
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Ending websocket listener
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] [pluginName=InteractiveCommands] Successfully closed websocket connection to: 172.31.15.243:443
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] Sending plugin InteractiveCommands completion message
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] document execution complete
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] sending document complete response...
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] [DataBackend] stopping ipc worker...
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] requested terminate messaging worker, destroying the channel
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] requested shutdown, prepare to stop messaging
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a requested close
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] Closed the file watcher listener thread
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] worker listener stopped on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a closed
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] ipc channel closed, stop messaging worker
2023-11-17 07:10:20 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] Session worker closed
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a requested close
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] sending reply for plugin update: InteractiveCommands
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Done
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] sending document: ecs-execute-command-03e391dc3f39b326a complete response
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] received plugin: InteractiveCommands result from Processor
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] session: ecs-execute-command-03e391dc3f39b326a complete
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Done
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] Closed the file watcher listener thread
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] master listener stopped on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received reply for SessionResult ecs-execute-command-03e391dc3f39b326a with message id 8635be0c-5e77-446a-83ec-9fcfe72d52f0
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Got reply msg Id 8635be0c-5e77-446a-83ec-9fcfe72d52f0 for SessionResult ecs-execute-command-03e391dc3f39b326a, starting reply thread
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] started reply processing - 8635be0c-5e77-446a-83ec-9fcfe72d52f0
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] successfully sent reply message id: 8635be0c-5e77-446a-83ec-9fcfe72d52f0
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-03e391dc3f39b326a closed
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-03e391dc3f39b326a] Executer closed
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] execution of ecs-execute-command-03e391dc3f39b326a is over. Removing interimState from current folder
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel b83d12f7-27ee-4f71-89f5-afa4e5ae2758, message type: agent_task_acknowledge
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - agent_task_acknowledge, Id - b83d12f7-27ee-4f71-89f5-afa4e5ae2758
2023-11-17 07:10:20 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] ended reply processing - 8635be0c-5e77-446a-83ec-9fcfe72d52f0
2023-11-17 07:10:23 INFO [ssm-session-worker] [ecs-execute-command-03e391dc3f39b326a] Stop the cloudwatchlogs publisher
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel 2e49ffd0-16cf-4ad7-998d-38ae6cc19ca0, message type: interactive_shell
2023-11-17 07:10:24 INFO ssm-session-worker - v3.2.1705.0
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - interactive_shell, Id - 2e49ffd0-16cf-4ad7-998d-38ae6cc19ca0
2023-11-17 07:10:24 INFO picking up runtime config identity selector
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Parsing AgentMessage 2e49ffd0-16cf-4ad7-998d-38ae6cc19ca0, Payload: {"schemaVersion":1,"taskId":"123456789012:ecs-execute-command-09c694f1b689cde86","topic":"test_topic","content":"{\"RunAsUser\":\"\",\"Parameters\":{\"cloudWatchLogGroupName\":\"/ecs/gate\",\"command\":\"sh\"},\"DocumentContent\":{\"schemaVersion\":\"1.0\",\"inputs\":{\"cloudWatchEncryptionEnabled\":\"{{cloudWatchEncryptionEnabled}}\",\"s3EncryptionEnabled\":\"{{s3EncryptionEnabled}}\",\"s3BucketName\":\"{{s3BucketName}}\",\"kmsKeyId\":\"{{kmsKeyId}}\",\"s3KeyPrefix\":\"{{s3KeyPrefix}}\",\"cloudWatchLogGroupName\":\"{{cloudWatchLogGroupName}}\"},\"description\":\"This document holds parameterized settings for starting a session with Session Manager.\",\"sessionType\":\"InteractiveCommands\",\"parameters\":{\"cloudWatchEncryptionEnabled\":{\"allowedValues\":[\"true\",\"false\"],\"default\":\"false\",\"description\":\"Enable Cloudwatch Encryption\",\"type\":\"String\"},\"s3EncryptionEnabled\":{\"allowedValues\":[\"true\",\"false\"],\"default\":\"false\",\"description\":\"Enable S3 Encryption\",\"type\":\"String\"},\"s3BucketName\":{\"default\":\"\",\"description\":\"S3 bucket for logging\",\"type\":\"String\"},\"kmsKeyId\":{\"default\":\"\",\"description\":\"KMS key for encryption\",\"type\":\"String\"},\"s3KeyPrefix\":{\"default\":\"\",\"description\":\"S3 prefix for logging\",\"type\":\"String\"},\"cloudWatchLogGroupName\":{\"default\":\"\",\"description\":\"Cloud watch log group name for logging\",\"type\":\"String\"},\"command\":{\"description\":\"The command to run on the instance\",\"type\":\"String\"}},\"properties\":{\"linux\":{\"runAsElevated\":false,\"commands\":\"{{command}}\"},\"windows\":{\"runAsElevated\":false,\"commands\":\"{{command}}\"}}},\"SessionOwner\":\"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command\",\"SessionId\":\"ecs-execute-command-09c694f1b689cde86\",\"DocumentName\":\"AmazonECS-ExecuteInteractiveCommand\"}"}
2023-11-17 07:10:24 INFO Agent will take identity from ECS
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Validating SSM parameters
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] Init the cloudwatchlogs publisher
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document ecs-execute-command-09c694f1b689cde86 submission started
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] document: ecs-execute-command-09c694f1b689cde86 worker started
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document ecs-execute-command-09c694f1b689cde86 submission ended
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] channel: ecs-execute-command-09c694f1b689cde86 found
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Got job ecs-execute-command-09c694f1b689cde86, starting worker
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] channel: ecs-execute-command-09c694f1b689cde86 not found, creating a new file channel...
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] worker listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] master listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] received plugin config message
2023-11-17 07:10:24 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] {"DocumentInformation":{"DocumentID":"ecs-execute-command-09c694f1b689cde86","CommandID":"ecs-execute-command-09c694f1b689cde86","AssociationID":"","InstanceID":"ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000","MessageID":"ecs-execute-command-09c694f1b689cde86","RunID":"2023-11-17T07-10-24.443Z","CreatedDate":"55847-05-09 21:27:19 +0000 UTC","DocumentName":"AmazonECS-ExecuteInteractiveCommand","DocumentVersion":"","DocumentStatus":"InProgress","RunCount":0,"ProcInfo":{"Pid":49,"StartTime":"2023-11-17T07:10:24.448930782Z"},"ClientId":"","RunAsUser":"","SessionOwner":"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command"},"DocumentType":"StartSession","SchemaVersion":"1.0","InstancePluginsInformation":[{"Configuration":{"Settings":null,"Properties":{"linux":{"commands":"sh","runAsElevated":false},"windows":{"commands":"sh","runAsElevated":false}},"OutputS3KeyPrefix":"","OutputS3BucketName":"","S3EncryptionEnabled":false,"CloudWatchLogGroup":"/ecs/gate","CloudWatchEncryptionEnabled":false,"CloudWatchStreamingEnabled":false,"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-09c694f1b689cde86/InteractiveCommands","MessageId":"ecs-execute-command-09c694f1b689cde86","BookKeepingFileName":"ecs-execute-command-09c694f1b689cde86","PluginName":"InteractiveCommands","PluginID":"InteractiveCommands","DefaultWorkingDirectory":"","Preconditions":null,"IsPreconditionEnabled":false,"CurrentAssociations":null,"SessionId":"ecs-execute-command-09c694f1b689cde86","ClientId":"","KmsKeyId":"","RunAsEnabled":false,"RunAsUser":"","ShellProfile":{"windows":"","linux":""},"SessionOwner":"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command","UpstreamServiceName":""},"Name":"InteractiveCommands","Result":{"pluginID":"","pluginName":"","status":"","code":0,"output":null,"startDateTime":"0001-01-01T00:00:00Z","endDateTime":"0001-01-01T00:00:00Z","outputS3BucketName":"","outputS3KeyPrefix":"","stepName":"","error":"","standardOutput":"","standardError":""},"Id":"InteractiveCommands"}],"CancelInformation":{"CancelMessageID":"","CancelCommandID":"","Payload":"","DebugInfo":""},"IOConfig":{"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-09c694f1b689cde86","OutputS3BucketName":"{{s3BucketName}}","OutputS3KeyPrefix":"{{s3KeyPrefix}}","CloudWatchConfig":{"LogGroupName":"","LogStreamPrefix":"","LogGroupEncryptionEnabled":false}},"UpstreamServiceName":"MessageGatewayService"}
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] Running plugin InteractiveCommands InteractiveCommands
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Setting up datachannel for session: ecs-execute-command-09c694f1b689cde86, requestId: 89827d25-65b7-4653-95f4-e744b44d61d8, clientId:
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Opening websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-09c694f1b689cde86?role=publish_subscribe
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Successfully opened websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-09c694f1b689cde86?role=publish_subscribe
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Starting websocket pinger
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Starting websocket listener
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Skipping handshake.
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Starting command executor
2023-11-17 07:10:24 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Plugin InteractiveCommands started
2023-11-17 07:13:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:13:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:18:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] started idempotency deletion thread
2023-11-17 07:18:49 WARN [ssm-agent-worker] [MessageService] [MessageHandler] [Idempotency] encountered error open /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/idempotency: no such file or directory while listing directories in /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/idempotency
2023-11-17 07:18:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] ended idempotency deletion thread
2023-11-17 07:18:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:18:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:23:30 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Uploading logs at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-09c694f1b689cde86/InteractiveCommands/ecs-execute-command-09c694f1b689cde86.log to CloudWatch
2023-11-17 07:23:31 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Started CloudWatch upload
2023-11-17 07:23:31 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Log stream creation started
2023-11-17 07:23:31 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Log stream already created
2023-11-17 07:23:31 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Log stream creation ended
2023-11-17 07:23:31 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Calling Get Sequence token
2023-11-17 07:23:31 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Received Sequence token
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Finished uploading events to CloudWatch
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] requested terminate messaging worker, destroying the channel
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Stopping pty
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Closing datachannel with channel Id ecs-execute-command-09c694f1b689cde86
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Closing websocket channel connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-09c694f1b689cde86?role=publish_subscribe
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Ending websocket pinger
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Ending the channel listening routine since the channel is closed
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Ending websocket listener
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] [pluginName=InteractiveCommands] Successfully closed websocket connection to: 172.31.36.248:443
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] Sending plugin InteractiveCommands completion message
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] document execution complete
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] sending document complete response...
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] [DataBackend] stopping ipc worker...
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] requested shutdown, prepare to stop messaging
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86 requested close
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] Closed the file watcher listener thread
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] worker listener stopped on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86 closed
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] ipc channel closed, stop messaging worker
2023-11-17 07:23:32 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] Session worker closed
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86 requested close
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] sending reply for plugin update: InteractiveCommands
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Done
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] sending document: ecs-execute-command-09c694f1b689cde86 complete response
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] received plugin: InteractiveCommands result from Processor
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] session: ecs-execute-command-09c694f1b689cde86 complete
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received reply for SessionResult ecs-execute-command-09c694f1b689cde86 with message id b975085f-a763-4d88-844b-d2956f56fa02
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Got reply msg Id b975085f-a763-4d88-844b-d2956f56fa02 for SessionResult ecs-execute-command-09c694f1b689cde86, starting reply thread
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] started reply processing - b975085f-a763-4d88-844b-d2956f56fa02
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] successfully sent reply message id: b975085f-a763-4d88-844b-d2956f56fa02
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Done
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] Closed the file watcher listener thread
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] master listener stopped on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-09c694f1b689cde86 closed
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-09c694f1b689cde86] Executer closed
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] execution of ecs-execute-command-09c694f1b689cde86 is over. Removing interimState from current folder
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel c7461469-3e18-4069-97d2-d7696918b894, message type: agent_task_acknowledge
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - agent_task_acknowledge, Id - c7461469-3e18-4069-97d2-d7696918b894
2023-11-17 07:23:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] ended reply processing - b975085f-a763-4d88-844b-d2956f56fa02
2023-11-17 07:23:35 INFO [ssm-session-worker] [ecs-execute-command-09c694f1b689cde86] Stop the cloudwatchlogs publisher
2023-11-17 07:23:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:23:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:28:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] started idempotency deletion thread
2023-11-17 07:28:49 WARN [ssm-agent-worker] [MessageService] [MessageHandler] [Idempotency] encountered error open /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/idempotency: no such file or directory while listing directories in /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/idempotency
2023-11-17 07:28:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] ended idempotency deletion thread
2023-11-17 07:28:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:28:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:33:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:33:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:38:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] started idempotency deletion thread
2023-11-17 07:38:49 WARN [ssm-agent-worker] [MessageService] [MessageHandler] [Idempotency] encountered error open /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/idempotency: no such file or directory while listing directories in /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/idempotency
2023-11-17 07:38:49 INFO [ssm-agent-worker] [MessageService] [MessageHandler] ended idempotency deletion thread
2023-11-17 07:38:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread started
2023-11-17 07:38:51 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] send failed reply thread done
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel 3b2829ce-c547-4388-bdc2-ac6e0f5dec64, message type: interactive_shell
2023-11-17 07:40:28 INFO ssm-session-worker - v3.2.1705.0
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - interactive_shell, Id - 3b2829ce-c547-4388-bdc2-ac6e0f5dec64
2023-11-17 07:40:28 INFO picking up runtime config identity selector
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Parsing AgentMessage 3b2829ce-c547-4388-bdc2-ac6e0f5dec64, Payload: {"schemaVersion":1,"taskId":"123456789012:aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","topic":"test_topic","content":"{\"RunAsUser\":\"\",\"Parameters\":{\"localPortNumber\":\"80\",\"portNumber\":\"80\"},\"DocumentContent\":{\"schemaVersion\":\"1.0\",\"inputs\":{\"cloudWatchEncryptionEnabled\":true,\"s3EncryptionEnabled\":true,\"runAsDefaultUser\":\"\",\"s3BucketName\":\"\",\"kmsKeyId\":\"\",\"runAsEnabled\":false,\"s3KeyPrefix\":\"\",\"cloudWatchLogGroupName\":\"\"},\"description\":\"Document to start port forwarding session over Session Manager\",\"sessionType\":\"Port\",\"parameters\":{\"localPortNumber\":{\"default\":\"0\",\"description\":\"(Optional) Port number on local machine to forward traffic to. An open port is chosen at run-time if not provided\",\"type\":\"String\",\"allowedPattern\":\"^([0-9]|[1-9][0-9]{1,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$\"},\"portNumber\":{\"default\":\"80\",\"description\":\"(Optional) Port number of the server on the instance\",\"type\":\"String\",\"allowedPattern\":\"^([1-9]|[1-9][0-9]{1,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$\"}},\"properties\":{\"localPortNumber\":\"{{ localPortNumber }}\",\"type\":\"LocalPortForwarding\",\"portNumber\":\"{{ portNumber }}\"}},\"SessionOwner\":\"arn:aws:sts::123456789012:assumed-role/KayacDeveloper/aws-go-sdk-1700206823550536000\",\"SessionId\":\"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00\",\"DocumentName\":\"AWS-StartPortForwardingSession\"}"}
2023-11-17 07:40:28 INFO Agent will take identity from ECS
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Validating SSM parameters
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] Init the cloudwatchlogs publisher
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 submission started
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] document: aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 worker started
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 submission ended
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] channel: aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 found
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Got job aws-go-sdk-1700206823550536000-0749df7ec4fc89a00, starting worker
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] channel: aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 not found, creating a new file channel...
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] worker listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] master listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] received plugin config message
2023-11-17 07:40:28 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] {"DocumentInformation":{"DocumentID":"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","CommandID":"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","AssociationID":"","InstanceID":"ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000","MessageID":"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","RunID":"2023-11-17T07-40-28.449Z","CreatedDate":"55847-05-30 18:34:06 +0000 UTC","DocumentName":"AWS-StartPortForwardingSession","DocumentVersion":"","DocumentStatus":"InProgress","RunCount":0,"ProcInfo":{"Pid":64,"StartTime":"2023-11-17T07:40:28.451729736Z"},"ClientId":"","RunAsUser":"","SessionOwner":"arn:aws:sts::123456789012:assumed-role/KayacDeveloper/aws-go-sdk-1700206823550536000"},"DocumentType":"StartSession","SchemaVersion":"1.0","InstancePluginsInformation":[{"Configuration":{"Settings":null,"Properties":{"localPortNumber":"80","portNumber":"80","type":"LocalPortForwarding"},"OutputS3KeyPrefix":"","OutputS3BucketName":"","S3EncryptionEnabled":true,"CloudWatchLogGroup":"","CloudWatchEncryptionEnabled":true,"CloudWatchStreamingEnabled":false,"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00/Port","MessageId":"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","BookKeepingFileName":"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","PluginName":"Port","PluginID":"Port","DefaultWorkingDirectory":"","Preconditions":null,"IsPreconditionEnabled":false,"CurrentAssociations":null,"SessionId":"aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","ClientId":"","KmsKeyId":"","RunAsEnabled":false,"RunAsUser":"","ShellProfile":{"windows":"","linux":""},"SessionOwner":"arn:aws:sts::123456789012:assumed-role/KayacDeveloper/aws-go-sdk-1700206823550536000","UpstreamServiceName":""},"Name":"Port","Result":{"pluginID":"","pluginName":"","status":"","code":0,"output":null,"startDateTime":"0001-01-01T00:00:00Z","endDateTime":"0001-01-01T00:00:00Z","outputS3BucketName":"","outputS3KeyPrefix":"","stepName":"","error":"","standardOutput":"","standardError":""},"Id":"Port"}],"CancelInformation":{"CancelMessageID":"","CancelCommandID":"","Payload":"","DebugInfo":""},"IOConfig":{"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00","OutputS3BucketName":"","OutputS3KeyPrefix":"","CloudWatchConfig":{"LogGroupName":"","LogStreamPrefix":"","LogGroupEncryptionEnabled":false}},"UpstreamServiceName":"MessageGatewayService"}
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] Running plugin Port Port
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Setting up datachannel for session: aws-go-sdk-1700206823550536000-0749df7ec4fc89a00, requestId: 0480bdba-faba-48c1-8f74-151efa7b3887, clientId:
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Opening websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00?role=publish_subscribe
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Successfully opened websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00?role=publish_subscribe
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Starting websocket pinger
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Starting websocket listener
2023-11-17 07:40:28 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Initiating Handshake
2023-11-17 07:40:29 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Client side session manager plugin version is: 1.2.463.0
2023-11-17 07:40:29 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Handshake successfully completed.
2023-11-17 07:40:29 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Plugin Port started
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] The session was cancelled
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] sending reply for plugin update: Port
2023-11-17 07:40:32 ERROR [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Unable to read from connection: read unix @->/var/lib/amazon/ssm/session/3679383145_mux.sock: use of closed network connection
2023-11-17 07:40:32 ERROR [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Unable to accept stream: io: read/write on closed pipe
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Closing datachannel with channel Id aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Closing websocket channel connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00?role=publish_subscribe
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Ending websocket pinger
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Successfully closed websocket connection to: 172.31.19.136:443
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Ending the channel listening routine since the channel is closed
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] [pluginName=Port] Ending websocket listener
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] Sending plugin Port completion message
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] document execution complete
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] sending document complete response...
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] [DataBackend] stopping ipc worker...
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] requested shutdown, prepare to stop messaging
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 requested close
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] Closed the file watcher listener thread
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] worker listener stopped on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 closed
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] file channel already closed: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] ipc channel closed, stop messaging worker
2023-11-17 07:40:32 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] Session worker closed
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Done
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] received plugin: Port result from Processor
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received reply for SessionResult aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 with message id c82d706b-7233-4010-a09b-42ec0e2750ff
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Got reply msg Id c82d706b-7233-4010-a09b-42ec0e2750ff for SessionResult aws-go-sdk-1700206823550536000-0749df7ec4fc89a00, starting reply thread
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] started reply processing - c82d706b-7233-4010-a09b-42ec0e2750ff
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] successfully sent reply message id: c82d706b-7233-4010-a09b-42ec0e2750ff
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] requested terminate messaging worker, destroying the channel
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 requested close
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] Closed the file watcher listener thread
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] master listener stopped on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] sending document: aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 complete response
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Done
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [SessionProcessorWrapper] session: aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 complete
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] channel /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 closed
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] Executer closed
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] execution of aws-go-sdk-1700206823550536000-0749df7ec4fc89a00 is over. Removing interimState from current folder
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel 97e65923-662f-4eb9-9db7-a9430ce41fe0, message type: agent_task_acknowledge
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - agent_task_acknowledge, Id - 97e65923-662f-4eb9-9db7-a9430ce41fe0
2023-11-17 07:40:32 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] ended reply processing - c82d706b-7233-4010-a09b-42ec0e2750ff
2023-11-17 07:40:35 INFO [ssm-session-worker] [aws-go-sdk-1700206823550536000-0749df7ec4fc89a00] Stop the cloudwatchlogs publisher
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] received message through control channel 285b989b-5088-4758-8d57-cfe89b19264f, message type: interactive_shell
2023-11-17 07:40:39 INFO ssm-session-worker - v3.2.1705.0
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Processing AgentMessage: MessageType - interactive_shell, Id - 285b989b-5088-4758-8d57-cfe89b19264f
2023-11-17 07:40:39 INFO picking up runtime config identity selector
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Parsing AgentMessage 285b989b-5088-4758-8d57-cfe89b19264f, Payload: {"schemaVersion":1,"taskId":"123456789012:ecs-execute-command-02f7755870b50f125","topic":"test_topic","content":"{\"RunAsUser\":\"\",\"Parameters\":{\"cloudWatchLogGroupName\":\"/ecs/gate\",\"command\":\"sh\"},\"DocumentContent\":{\"schemaVersion\":\"1.0\",\"inputs\":{\"cloudWatchEncryptionEnabled\":\"{{cloudWatchEncryptionEnabled}}\",\"s3EncryptionEnabled\":\"{{s3EncryptionEnabled}}\",\"s3BucketName\":\"{{s3BucketName}}\",\"kmsKeyId\":\"{{kmsKeyId}}\",\"s3KeyPrefix\":\"{{s3KeyPrefix}}\",\"cloudWatchLogGroupName\":\"{{cloudWatchLogGroupName}}\"},\"description\":\"This document holds parameterized settings for starting a session with Session Manager.\",\"sessionType\":\"InteractiveCommands\",\"parameters\":{\"cloudWatchEncryptionEnabled\":{\"allowedValues\":[\"true\",\"false\"],\"default\":\"false\",\"description\":\"Enable Cloudwatch Encryption\",\"type\":\"String\"},\"s3EncryptionEnabled\":{\"allowedValues\":[\"true\",\"false\"],\"default\":\"false\",\"description\":\"Enable S3 Encryption\",\"type\":\"String\"},\"s3BucketName\":{\"default\":\"\",\"description\":\"S3 bucket for logging\",\"type\":\"String\"},\"kmsKeyId\":{\"default\":\"\",\"description\":\"KMS key for encryption\",\"type\":\"String\"},\"s3KeyPrefix\":{\"default\":\"\",\"description\":\"S3 prefix for logging\",\"type\":\"String\"},\"cloudWatchLogGroupName\":{\"default\":\"\",\"description\":\"Cloud watch log group name for logging\",\"type\":\"String\"},\"command\":{\"description\":\"The command to run on the instance\",\"type\":\"String\"}},\"properties\":{\"linux\":{\"runAsElevated\":false,\"commands\":\"{{command}}\"},\"windows\":{\"runAsElevated\":false,\"commands\":\"{{command}}\"}}},\"SessionOwner\":\"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command\",\"SessionId\":\"ecs-execute-command-02f7755870b50f125\",\"DocumentName\":\"AmazonECS-ExecuteInteractiveCommand\"}"}
2023-11-17 07:40:39 INFO Agent will take identity from ECS
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [MGSInteractor] Validating SSM parameters
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] Init the cloudwatchlogs publisher
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document ecs-execute-command-02f7755870b50f125 submission started
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] document: ecs-execute-command-02f7755870b50f125 worker started
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] document ecs-execute-command-02f7755870b50f125 submission ended
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] channel: ecs-execute-command-02f7755870b50f125 found
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] Got job ecs-execute-command-02f7755870b50f125, starting worker
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-02f7755870b50f125
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-02f7755870b50f125] channel: ecs-execute-command-02f7755870b50f125 not found, creating a new file channel...
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] worker listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-02f7755870b50f125
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-02f7755870b50f125] master listener started on path: /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-02f7755870b50f125
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] received plugin config message
2023-11-17 07:40:39 INFO [ssm-agent-worker] [MessageService] [EngineProcessor] [BasicExecuter] [ecs-execute-command-02f7755870b50f125] inter process communication started at /var/lib/amazon/ssm/00000000000000000000000000000000-000000000/channels/ecs-execute-command-02f7755870b50f125
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] {"DocumentInformation":{"DocumentID":"ecs-execute-command-02f7755870b50f125","CommandID":"ecs-execute-command-02f7755870b50f125","AssociationID":"","InstanceID":"ecs:default_00000000000000000000000000000000_00000000000000000000000000000000-000000000","MessageID":"ecs-execute-command-02f7755870b50f125","RunID":"2023-11-17T07-40-39.705Z","CreatedDate":"55847-05-30 21:41:42 +0000 UTC","DocumentName":"AmazonECS-ExecuteInteractiveCommand","DocumentVersion":"","DocumentStatus":"InProgress","RunCount":0,"ProcInfo":{"Pid":71,"StartTime":"2023-11-17T07:40:39.707783207Z"},"ClientId":"","RunAsUser":"","SessionOwner":"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command"},"DocumentType":"StartSession","SchemaVersion":"1.0","InstancePluginsInformation":[{"Configuration":{"Settings":null,"Properties":{"linux":{"commands":"sh","runAsElevated":false},"windows":{"commands":"sh","runAsElevated":false}},"OutputS3KeyPrefix":"","OutputS3BucketName":"","S3EncryptionEnabled":false,"CloudWatchLogGroup":"/ecs/gate","CloudWatchEncryptionEnabled":false,"CloudWatchStreamingEnabled":false,"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-02f7755870b50f125/InteractiveCommands","MessageId":"ecs-execute-command-02f7755870b50f125","BookKeepingFileName":"ecs-execute-command-02f7755870b50f125","PluginName":"InteractiveCommands","PluginID":"InteractiveCommands","DefaultWorkingDirectory":"","Preconditions":null,"IsPreconditionEnabled":false,"CurrentAssociations":null,"SessionId":"ecs-execute-command-02f7755870b50f125","ClientId":"","KmsKeyId":"","RunAsEnabled":false,"RunAsUser":"","ShellProfile":{"windows":"","linux":""},"SessionOwner":"arn:aws:sts::123456789012:assumed-role/AWSServiceRoleForECS/ecs-execute-command","UpstreamServiceName":""},"Name":"InteractiveCommands","Result":{"pluginID":"","pluginName":"","status":"","code":0,"output":null,"startDateTime":"0001-01-01T00:00:00Z","endDateTime":"0001-01-01T00:00:00Z","outputS3BucketName":"","outputS3KeyPrefix":"","stepName":"","error":"","standardOutput":"","standardError":""},"Id":"InteractiveCommands"}],"CancelInformation":{"CancelMessageID":"","CancelCommandID":"","Payload":"","DebugInfo":""},"IOConfig":{"OrchestrationDirectory":"/var/lib/amazon/ssm/00000000000000000000000000000000-000000000/session/orchestration/ecs-execute-command-02f7755870b50f125","OutputS3BucketName":"{{s3BucketName}}","OutputS3KeyPrefix":"{{s3KeyPrefix}}","CloudWatchConfig":{"LogGroupName":"","LogStreamPrefix":"","LogGroupEncryptionEnabled":false}},"UpstreamServiceName":"MessageGatewayService"}
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] Running plugin InteractiveCommands InteractiveCommands
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Setting up datachannel for session: ecs-execute-command-02f7755870b50f125, requestId: 68a70a67-fa2a-4035-b9c9-ec43245b958d, clientId:
2023-11-17 07:40:39 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Opening websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-02f7755870b50f125?role=publish_subscribe
2023-11-17 07:40:40 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Successfully opened websocket connection to: wss://ssmmessages.ap-northeast-1.amazonaws.com/v1/data-channel/ecs-execute-command-02f7755870b50f125?role=publish_subscribe
2023-11-17 07:40:40 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Starting websocket pinger
2023-11-17 07:40:40 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Starting websocket listener
2023-11-17 07:40:40 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Skipping handshake.
2023-11-17 07:40:40 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Starting command executor
2023-11-17 07:40:40 INFO [ssm-session-worker] [ecs-execute-command-02f7755870b50f125] [DataBackend] [pluginName=InteractiveCommands] Plugin InteractiveCommands started
